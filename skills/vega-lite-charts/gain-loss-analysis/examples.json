{
  "simplified_gain_loss": {
    "name": "简化版得失分析图（推荐）",
    "description": "以零线为基准的双向柱状图，极简风格，无坐标轴，细柱子，品牌标签智能定位",
    "spec": {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": {
        "text": "品牌市场份额得失分析",
        "subtitle": "以零线为基准，展示品牌市场份额增长（上）和下跌（下）",
        "anchor": "middle",
        "fontSize": 20,
        "fontWeight": "bold"
      },
      "data": {
        "values": [
          {"brand": "品牌A", "value": 0.0099},
          {"brand": "品牌B", "value": 0.0075},
          {"brand": "品牌C", "value": 0.007},
          {"brand": "品牌D", "value": -0.0035},
          {"brand": "品牌E", "value": -0.009},
          {"brand": "品牌F", "value": -0.0231}
        ]
      },
      "layer": [
        {
          "mark": {
            "type": "rule",
            "color": "black",
            "strokeWidth": 2,
            "opacity": 0.3
          },
          "encoding": {
            "y": {"datum": 0, "type": "quantitative"}
          }
        },
        {
          "mark": {"type": "bar", "opacity": 0.8, "width": 20},
          "encoding": {
            "x": {
              "field": "brand",
              "type": "nominal",
              "title": "",
              "sort": null,
              "axis": {"labelExpr": ""}
            },
            "y": {
              "field": "value",
              "type": "quantitative",
              "title": "市场份额增长率",
              "axis": null
            },
            "color": {
              "field": "value",
              "type": "quantitative",
              "scale": {
                "domain": [-0.03, 0, 0.012],
                "range": ["#d62728", "#d62728", "#2ca02c"],
                "type": "threshold"
              },
              "legend": null
            },
            "tooltip": [
              {"field": "brand", "type": "nominal", "title": "品牌"},
              {"field": "value", "type": "quantitative", "title": "增长率", "format": ".2%"}
            ]
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "bottom",
            "dy": -5,
            "fontSize": 12,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"field": "value", "type": "quantitative"},
            "text": {"field": "value", "type": "quantitative", "format": ".2%"},
            "color": {"value": "#2ca02c"},
            "opacity": {
              "condition": {"test": "datum.value >= 0", "value": 1},
              "value": 0
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "top",
            "dy": 5,
            "fontSize": 12,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"field": "value", "type": "quantitative"},
            "text": {"field": "value", "type": "quantitative", "format": ".2%"},
            "color": {"value": "#d62728"},
            "opacity": {
              "condition": {"test": "datum.value < 0", "value": 1},
              "value": 0
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "top",
            "dy": 15,
            "fontSize": 12,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"datum": 0, "type": "quantitative"},
            "text": {"field": "brand", "type": "nominal"},
            "color": {"value": "#333"},
            "opacity": {
              "condition": {"test": "datum.value >= 0", "value": 1},
              "value": 0
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "bottom",
            "dy": -15,
            "fontSize": 12,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"datum": 0, "type": "quantitative"},
            "text": {"field": "brand", "type": "nominal"},
            "color": {"value": "#333"},
            "opacity": {
              "condition": {"test": "datum.value < 0", "value": 1},
              "value": 0
            }
          }
        }
      ],
      "width": 800,
      "height": 500,
      "config": {
        "axis": {
          "domain": false,
          "labels": false,
          "ticks": false,
          "title": false
        },
        "view": {
          "stroke": null
        }
      }
    }
  },
  "full_gain_loss": {
    "name": "完整版得失分析图",
    "description": "标准得失分析柱状图，包含完整坐标轴和标签，适合详细数据分析",
    "spec": {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": {
        "text": "品牌市场份额得失分析",
        "subtitle": "Top 15 品牌市场份额增长率对比",
        "anchor": "middle",
        "fontSize": 20,
        "fontWeight": "bold"
      },
      "data": {
        "values": [
          {"brand": "旺仔", "value": 0.014},
          {"brand": "优酸乳", "value": 0.010},
          {"brand": "伊利", "value": 0.006},
          {"brand": "海河", "value": 0.005},
          {"brand": "光明", "value": 0.004},
          {"brand": "蒙牛", "value": 0.004},
          {"brand": "菊乐", "value": 0.003},
          {"brand": "燕塘", "value": 0.001},
          {"brand": "谷粒多", "value": -0.001},
          {"brand": "QQ星", "value": -0.003},
          {"brand": "未来星", "value": -0.003},
          {"brand": "真果粒", "value": -0.003},
          {"brand": "酸酸乳", "value": -0.003},
          {"brand": "营养快线", "value": -0.004},
          {"brand": "娃哈哈", "value": -0.029}
        ]
      },
      "layer": [
        {
          "mark": {"type": "bar", "opacity": 0.8},
          "encoding": {
            "x": {
              "field": "brand",
              "type": "nominal",
              "title": "品牌",
              "sort": null,
              "axis": {"labelAngle": -45, "labelFontSize": 11}
            },
            "y": {
              "field": "value",
              "type": "quantitative",
              "title": "市场份额增长率",
              "axis": {"format": ".1%"},
              "scale": {"domain": [-0.035, 0.018]}
            },
            "color": {
              "field": "value",
              "type": "quantitative",
              "scale": {
                "domain": [-0.035, 0, 0.018],
                "range": ["#d62728", "#d62728", "#2ca02c"],
                "type": "threshold"
              },
              "legend": {
                "title": "增长情况",
                "orient": "right",
                "symbolSize": 150
              }
            },
            "tooltip": [
              {"field": "brand", "type": "nominal", "title": "品牌"},
              {"field": "value", "type": "quantitative", "title": "增长率", "format": ".3%"}
            ]
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "bottom",
            "dy": -5,
            "fontSize": 11,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"field": "value", "type": "quantitative"},
            "text": {"field": "value", "type": "quantitative", "format": ".3%"},
            "color": {"value": "#2ca02c"},
            "opacity": {
              "condition": {"test": "datum.value >= 0", "value": 1},
              "value": 0
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "top",
            "dy": 5,
            "fontSize": 11,
            "fontWeight": "bold"
          },
          "encoding": {
            "x": {"field": "brand", "type": "nominal", "sort": null},
            "y": {"field": "value", "type": "quantitative"},
            "text": {"field": "value", "type": "quantitative", "format": ".3%"},
            "color": {"value": "#d62728"},
            "opacity": {
              "condition": {"test": "datum.value < 0", "value": 1},
              "value": 0
            }
          }
        }
      ],
      "width": 1000,
      "height": 600,
      "config": {
        "axis": {
          "labelFontSize": 12,
          "titleFontSize": 14
        }
      }
    }
  }
}
